@model IEnumerable<VirtualStore.Order>
@{
    ViewBag.Title = "All Orders";
}

<div class="admin-header">
    <h2 class="store-title">
        <strong>
            All Orders
        </strong>
    </h2>

    @Html.ActionLink(
        "Back to Admin Panel",
        "Index",
        "Manage",
        null,
        new { @class = "btn btn-outline" }
    )
</div>

<div class="store-card pad">
    <table class="table-clean table-card">
        <thead>
            <tr>
                <th class="col-center">Order #</th>
                <th>User</th>
                <th class="col-center">Date</th>
                <th class="col-center">Total</th>
                <th class="col-center">Status</th>
                <th class="col-center" style="width:120px;"></th>
                <th class="col-center" style="width:120px;"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var o in Model)
            {
                <tr>
                    <td class="col-center">@o.Id</td>
                    <td>@o.userName</td>
                    <td class="col-center">@o.dateOrder</td>
                    <td class="col-center">@o.totalAmount</td>
                    @{
                        var st = (o.statusOrder ?? "").Trim().ToLowerInvariant();
                        var pillClass =
                            st == "created" ? "pill pill-created" :
                            st == "processing" ? "pill pill-processing" :
                            st == "shipped" ? "pill pill-shipped" :
                            st == "delivered" ? "pill pill-delivered" :
                            st == "cancelled" ? "pill pill-cancelled" :
                                                 "pill";
                    }

                    <td class="col-center">
                        <span class="@pillClass">@o.statusOrder.ToUpper()</span>
                    </td>
                    <td class="col-center" style="text-align:right;">
                        @Html.ActionLink(
                            "Details",
                            "Details",
                            "Orders",
                            new { id = o.Id, returnUrl = Request.RawUrl },
                            new { @class = "btn btn-outline btn-small" }
                        )
                    </td>
                    <td class="col-center" style="text-align:right;">
                        @Html.ActionLink(
                            "Edit status",
                            "EditStatus",
                            "Orders",
                            new { id = o.Id, returnUrl = Request.RawUrl },
                            new { @class = "btn btn-brand btn-small" }
                        )
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>